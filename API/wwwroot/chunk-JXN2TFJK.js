import{a as h}from"./chunk-42EDXFKB.js";import{Aa as R,Ba as $,Ea as D,Fa as T,Ha as L,Ia as H,U as F,_ as N,aa as u,ba as z,ca as f,da as _,ga as E,h as O,ha as J,ia as I,j as y,ja as M,ka as w,ma as g}from"./chunk-DHTIDUZ4.js";import{Cb as b,Db as P,Fb as U,Gb as j,Hb as i,Ib as r,Jb as s,Ob as C,Qb as x,Tb as q,ac as m,bc as S,cb as a,cc as k,db as B,ha as l,ic as d,la as c,tb as v,xb as p}from"./chunk-VIE6AABR.js";var A=class o{fb=l(w);accountService=l(L);router=l(y);activatedRoute=l(O);returnUrl="/shop";constructor(){let t=this.activatedRoute.snapshot.queryParams.returnUrl;t&&(this.returnUrl=t)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getInfor().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=c({type:o,selectors:[["app-login"]],standalone:!0,features:[d],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","matInput",""],["formControlName","password","type","password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(e,n){e&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return n.onSubmit()}),i(2,"div",2)(3,"h1",3),m(4,"Login"),r()(),i(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email address"),r(),s(8,"input",5),r(),i(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),r(),s(12,"input",6),r(),i(13,"button",7),m(14,"Sign in"),r()()()),e&2&&(a(),p("formGroup",n.loginForm))},dependencies:[D,T,g,E,N,f,_,I,M,R,F,h]})};function Y(o,t){if(o&1&&(i(0,"mat-error"),m(1),r()),o&2){let e=x();a(),k("",e.label," is required")}}function Z(o,t){o&1&&(i(0,"mat-error"),m(1,"Email is invalid"),r())}var G=class o{constructor(t){this.controlDir=t;this.controlDir.valueAccessor=this}label="";type="text";writeValue(t){}registerOnChange(t){}registerOnTouched(t){}setDisabledState(t){}get control(){return this.controlDir.control}static \u0275fac=function(e){return new(e||o)(B(z,2))};static \u0275cmp=c({type:o,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[d],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(e,n){e&1&&(i(0,"mat-form-field",0)(1,"mat-label"),m(2),r(),s(3,"input",1),v(4,Y,2,1,"mat-error")(5,Z,2,0,"mat-error"),r()),e&2&&(a(2),S(n.label),a(),q("type",n.type),q("placeholder",n.label),p("formControl",n.control),a(),b(n.control.hasError("required")?4:-1),a(),b(n.control.hasError("email")?5:-1))},dependencies:[g,N,f,J,D,T,$,R]})};function tt(o,t){if(o&1&&(i(0,"li"),m(1),r()),o&2){let e=t.$implicit;a(),S(e)}}function et(o,t){if(o&1&&(i(0,"div",8)(1,"ul",10),U(2,tt,2,1,"li",null,P),r()()),o&2){let e=x();a(2),j(e.validationErrors)}}var V=class o{fb=l(w);accountService=l(L);router=l(y);snack=l(H);validationErrors;registerForm=this.fb.group({firstName:["",u.required],lastName:["",u.required],email:["",[u.required,u.email]],password:["",u.required,u.pattern("(?=.*[a-z])")]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:t=>this.validationErrors=t})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=c({type:o,selectors:[["app-register"]],standalone:!0,features:[d],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email","formControlName","email"],["label","Password","formControlName","password"],[1,"mb03","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(e,n){e&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return n.onSubmit()}),i(2,"div",2)(3,"h1",3),m(4,"Register"),r()(),s(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),v(9,et,4,0,"div",8),i(10,"button",9),m(11," Sign in "),r()()()),e&2&&(a(),p("formGroup",n.registerForm),a(8),b(n.validationErrors?9:-1),a(),p("disabled",n.registerForm.invalid))},dependencies:[g,E,f,_,I,M,h,F,G]})};var Dt=[{path:"account/login",component:A},{path:"account/register",component:V}];export{Dt as accountRoutes};
